<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Z+ Employee Dashboard</title>
    <link rel="stylesheet" href="employee-dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script defer src="https://kit.fontawesome.com/2c36e9b7b1.js" crossorigin="anonymous"></script>
    <script defer src="employee-dashboard.js"></script>
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="top-navbar">
        <div class="navbar-left">
            <div class="logo">
                <i class="fas fa-user-tie"></i>
                <h2>Z+ Employee Portal</h2>
            </div>
        </div>
        <div class="navbar-right">
            <div class="notification-container">
                <button class="notification-btn" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationBadge">2</span>
                </button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Notifications</h3>
                        <button class="mark-all-read">Mark all read</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <!-- Notifications will be loaded here -->
                    </div>
                </div>
            </div>
            <div class="user-menu">
                <button class="user-btn" id="userBtn">
                    <img src="../asset/company_logo5.png" alt="User" class="user-avatar">
                    <span id="userName">Employee User</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="user-dropdown" id="userDropdown">
                    <a href="#" onclick="openProfile()"><i class="fas fa-user"></i> My Profile</a>
                    <a href="#" onclick="openSettings()"><i class="fas fa-cog"></i> Settings</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Employee Menu</h3>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li class="menu-item active">
                <a href="#" onclick="showDashboard()">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" onclick="showContacts()">
                    <i class="fas fa-address-book"></i>
                    <span>My Contacts</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" onclick="showTasks()">
                    <i class="fas fa-tasks"></i>
                    <span>My Tasks</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" onclick="showProjects()">
                    <i class="fas fa-project-diagram"></i>
                    <span>Projects</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" onclick="showReports()">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" onclick="showCalendar()">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Calendar</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content" id="mainContent">
        <!-- Dashboard Content -->
        <div class="content-section active" id="dashboardContent">
            <div class="content-header">
                <h1>Employee Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            
            <!-- Welcome Message -->
            <div class="welcome-message">
                <h2>Welcome back, <span id="employeeName">Employee</span>!</h2>
                <p>Here's your overview for today.</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-address-book"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalContacts">5</h3>
                        <p>Assigned Contacts</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="activeTasks">3</h3>
                        <p>Active Tasks</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="completedTasks">12</h3>
                        <p>Completed This Week</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="pendingFollowUps">2</h3>
                        <p>Pending Follow-ups</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-grid">
                    <button class="action-card" onclick="showContacts()">
                        <i class="fas fa-address-book"></i>
                        <span>View Contacts</span>
                    </button>
                    <button class="action-card" onclick="createTask()">
                        <i class="fas fa-plus"></i>
                        <span>New Task</span>
                    </button>
                    <button class="action-card" onclick="updateContactStatus()">
                        <i class="fas fa-edit"></i>
                        <span>Update Status</span>
                    </button>
                    <button class="action-card" onclick="generateReport()">
                        <i class="fas fa-file-alt"></i>
                        <span>Generate Report</span>
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="dashboard-section">
                <h2>Recent Activity</h2>
                <div class="activity-list" id="recentActivity">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="activity-content">
                            <p><strong>New contact assigned:</strong> John Smith</p>
                            <span class="activity-time">2 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="activity-content">
                            <p><strong>Task completed:</strong> Follow up with Maria Garcia</p>
                            <span class="activity-time">5 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="activity-content">
                            <p><strong>Contact updated:</strong> Called David Johnson</p>
                            <span class="activity-time">1 day ago</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assigned Contacts -->
            <div class="dashboard-section">
                <h2>Recently Assigned Contacts</h2>
                <div class="contacts-grid" id="assignedContacts">
                    <div class="contact-card">
                        <div class="contact-header">
                            <h4>John Smith</h4>
                            <span class="contact-status new">New</span>
                        </div>
                        <p class="contact-email">john.smith@email.com</p>
                        <p class="contact-subject">Product Inquiry</p>
                        <div class="contact-actions">
                            <button class="btn btn-sm btn-primary" onclick="viewContact(1)">View</button>
                            <button class="btn btn-sm btn-success" onclick="contactClient(1)">Contact</button>
                        </div>
                    </div>
                    <div class="contact-card">
                        <div class="contact-header">
                            <h4>Maria Garcia</h4>
                            <span class="contact-status in-progress">In Progress</span>
                        </div>
                        <p class="contact-email">maria.garcia@email.com</p>
                        <p class="contact-subject">Support Request</p>
                        <div class="contact-actions">
                            <button class="btn btn-sm btn-primary" onclick="viewContact(2)">View</button>
                            <button class="btn btn-sm btn-warning" onclick="followUp(2)">Follow Up</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contacts Content -->
        <div class="content-section" id="contactsContent">
            <div class="content-header">
                <h1>My Assigned Contacts</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportContacts()">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn-primary" onclick="refreshContacts()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            
            <div class="filters-section">
                <div class="filter-group">
                    <label>Status:</label>
                    <select id="contactStatusFilter" onchange="filterContacts()">
                        <option value="">All</option>
                        <option value="new">New</option>
                        <option value="in-progress">In Progress</option>
                        <option value="resolved">Resolved</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Search:</label>
                    <input type="text" id="contactSearchFilter" placeholder="Search contacts..." onkeyup="filterContacts()">
                </div>
            </div>

            <div class="contacts-container" id="contactsContainer">
                <!-- Contacts will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Logout Confirmation Modal -->
    <div class="modal" id="logoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Logout</h3>
                <button class="modal-close" onclick="closeModal('logoutModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to logout?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="confirmLogout()">Yes, Logout</button>
                <button class="btn btn-secondary" onclick="closeModal('logoutModal')">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize the dashboard when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeEmployeeDashboard();
        });

        function initializeEmployeeDashboard() {
            // Load user info from localStorage or session
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            if (user.username) {
                document.getElementById('userName').textContent = user.username;
                document.getElementById('employeeName').textContent = user.username;
            }

            // Load dashboard data
            loadDashboardStats();
            loadRecentActivity();
            loadAssignedContacts();
        }

        function loadDashboardStats() {
            // In a real application, this would make API calls
            // For now, we'll show static demo data
            console.log('Loading dashboard statistics...');
        }

        function loadRecentActivity() {
            console.log('Loading recent activity...');
        }

        function loadAssignedContacts() {
            console.log('Loading assigned contacts...');
        }

        function showDashboard() {
            hideAllSections();
            document.getElementById('dashboardContent').classList.add('active');
            updateActiveMenuItem('Dashboard');
        }

        function showContacts() {
            hideAllSections();
            document.getElementById('contactsContent').classList.add('active');
            updateActiveMenuItem('My Contacts');
        }

        function hideAllSections() {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));
        }

        function updateActiveMenuItem(itemName) {
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            
            const activeItem = Array.from(menuItems).find(item => 
                item.textContent.includes(itemName)
            );
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        function logout() {
            document.getElementById('logoutModal').style.display = 'flex';
        }

        function confirmLogout() {
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            window.location.href = '/admin/index.html';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function openProfile() {
            alert('Profile management coming soon!');
        }

        function openSettings() {
            alert('Settings panel coming soon!');
        }

        function refreshDashboard() {
            location.reload();
        }

        function refreshContacts() {
            alert('Refreshing contacts...');
        }

        function exportContacts() {
            alert('Export functionality coming soon!');
        }

        function filterContacts() {
            console.log('Filtering contacts...');
        }

        // Dropdown toggles
        document.getElementById('userBtn').addEventListener('click', function() {
            document.getElementById('userDropdown').classList.toggle('show');
        });

        document.getElementById('notificationBtn').addEventListener('click', function() {
            document.getElementById('notificationDropdown').classList.toggle('show');
        });

        // Close dropdowns when clicking outside
        window.addEventListener('click', function(event) {
            if (!event.target.matches('.user-btn') && !event.target.closest('.user-menu')) {
                document.getElementById('userDropdown').classList.remove('show');
            }
            if (!event.target.matches('.notification-btn') && !event.target.closest('.notification-container')) {
                document.getElementById('notificationDropdown').classList.remove('show');
            }
        });
    </script>
</body>
</html>